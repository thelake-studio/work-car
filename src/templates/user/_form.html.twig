{# templates/user/_form.html.twig #}

{{ form_start(form, {'attr': {'class': 'container py-5'}}) }}
<div class="row justify-content-center">
	<div class="col-12 col-md-8 col-lg-6">
		<div class="card shadow">
			<div class="card-header bg-primary text-white">
				<h2 class="h4 mb-0">{{ form_title|default('Nuevo Usuario') }}</h2>
			</div>

			<div class="card-body p-4">
				<div class="row g-4">
					{{ form_errors(form) }}

					<div class="col-12">
						{{ form_row(form.name) }}
					</div>

					<div class="col-12">
						{{ form_row(form.surname) }}
					</div>

					<div class="col-12">
						{{ form_row(form.phoneNumber) }}
					</div>

					<div class="col-12">
						{{ form_row(form.email) }}
					</div>

					<div class="col-12">
						{{ form_row(form.password) }}
						<div class="form-check mt-2">
							<input type="checkbox" class="form-check-input" id="showPassword">
							<label class="form-check-label small" for="showPassword">
								Mostrar contraseña
							</label>
						</div>
					</div>

					<div class="col-12">
						{{ form_row(form.profilePicture) }}
						{% if user.profilePicture %}
							<div class="mt-3">
								<img src="{{ asset('uploads/profile/' ~ user.profilePicture) }}" alt="Foto actual" class="img-thumbnail" style="max-width: 150px;">
							</div>
						{% endif %}
					</div>
				</div>
			</div>

			<div class="card-footer bg-light">
				<div class="d-flex justify-content-between align-items-center">
					<button class="btn btn-primary btn-lg">
						<i class="bi bi-save me-2"></i>
						{{ button_label|default('Guardar') }}
					</button>
					<a href="{{ path('app_user_index') }}" class="btn btn-outline-secondary">
						<i class="bi bi-x-circle me-2"></i>
						Cancelar
					</a>
				</div>
			</div>
		</div>
	</div>
</div>
{{ form_end(form) }}

{% block javascripts %}
	<script>
		// Toggle para mostrar contraseña
        document.getElementById('showPassword').addEventListener('change', function (e) {
        const passwordField = document.querySelector('[data-password-toggle]');
        passwordField.type = e.target.checked ? 'text' : 'password';
        });
	</script>
{% endblock %}
